<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Una cartica para ti</title>
  <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
  <style>
    :root {
      --pink-1: #fff0f4;
      --pink-2: #ffd6e8;
      --accent: #c58b5a;
      --text: #1f1f23;
      --card: rgba(255, 255, 255, 0.9);
      --glass: rgba(255, 255, 255, 0.55);
      --bg-dark: #121217;
      --text-dark: #eee;
      --card-dark: rgba(30,30,35,0.8);
      --glass-dark: rgba(30,30,35,0.6);
    }
    /* Reset */
    * { box-sizing: border-box; }
    html, body {
      height: 100%;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      color: var(--text);
      background: linear-gradient(180deg, var(--pink-1), var(--pink-2));
      transition: background-color 0.4s ease, color 0.4s ease;
    }
    a { color: inherit; text-decoration: none; }
    body.intro-active { overflow: hidden; height: 100%; }
    #introOverlay {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(180deg, rgba(255,240,248,0.98), rgba(255,214,232,0.98));
      backdrop-filter: blur(6px) saturate(120%);
      -webkit-backdrop-filter: blur(6px) saturate(120%);
      transition: opacity 450ms cubic-bezier(.2,.9,.2,1), transform 450ms cubic-bezier(.2,.9,.2,1);
      will-change: opacity, transform;
    }
    #introOverlay.hide {
      opacity: 0;
      transform: translateY(-6px) scale(0.995);
      pointer-events: none;
    }
    #introOverlay .intro-inner {
      text-align: center;
      padding: 2.25rem 1.5rem;
      max-width: 980px;
    }
    #introOverlay h1 {
      margin: 0 0 0.35rem;
      font-size: clamp(2rem, 5.5vw, 3.25rem);
      letter-spacing: 0.02em;
      font-weight: 900;
      color: #1f1f23;
      line-height: 1.05;
      white-space: pre-wrap;
      word-break: break-word;
    }
    #introOverlay h1 .caret {
      display: inline-block;
      width: .6ch;
      margin-left: .15rem;
      animation: blink 1s steps(1) infinite;
      transform-origin: center;
    }

    @keyframes blink { 50% { opacity: 0 } }
    #introOverlay .enter-hint {
      display: inline-flex;
      gap: .6rem;
      align-items: center;
      padding: .6rem 1rem;
      border-radius: 999px;
      background: rgba(255,255,255,0.7);
      box-shadow: 0 6px 20px rgba(31,31,35,0.06);
      font-weight: 700;
      cursor: pointer;
      user-select: none;
      transition: transform .16s ease, opacity .2s ease;
    }
    #introOverlay .enter-hint.hidden { opacity: 0; pointer-events: none; transform: translateY(6px); }
    #introOverlay .access-esc {
      margin-top: .75rem;
      font-size: .85rem;
      color: rgba(31,31,35,0.6);
    }
    body.dark { background: #121217; color: var(--text-dark); }
    body.dark .card { background: var(--card-dark); box-shadow: 0 8px 30px rgba(0,0,0,0.7); }
    body.dark .play-hint { background: var(--glass-dark); box-shadow: 0 6px 18px rgba(0,0,0,0.3); }
    body.dark details[open] summary { background: linear-gradient(90deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); }
    header.hero { position: relative; height: 100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:2rem 1rem 3rem; }
    header.hero h1 { font-size: clamp(2rem,6vw,4rem); margin:0 0 0.5rem; font-weight:800; letter-spacing:0.05em; }
    header.hero p { margin:0 0 1.25rem; font-size:1.125rem; opacity:0.9; max-width:500px; line-height:1.5; }
    .play-hint { font-size:0.9rem; background:var(--glass); padding:0.6rem 1rem; border-radius:999px; box-shadow:0 6px 18px rgba(0,0,0,0.08); user-select:none; transition: transform 0.3s ease, opacity 0.35s ease; cursor:pointer; display:inline-flex; align-items:center; gap:0.5em; font-weight:600; }
    .dark-toggle { position: fixed; top:1rem; right:1rem; background:var(--glass); border:none; padding:0.5rem 0.8rem; border-radius:9999px; box-shadow:0 6px 18px rgba(0,0,0,0.1); cursor:pointer; font-weight:700; font-size:1rem; transition: background 0.3s ease, color 0.3s ease; user-select:none; z-index:1000; }
    body.dark .dark-toggle { background:var(--glass-dark); color:var(--text-dark); box-shadow:0 6px 18px rgba(0,0,0,0.6); }
    .music-toggle { position: fixed; top:1rem; right:5.5rem; background:var(--glass); border:none; padding:0.5rem 0.8rem; border-radius:9999px; box-shadow:0 6px 18px rgba(0,0,0,0.1); cursor:pointer; font-weight:700; font-size:1rem; transition: background 0.3s ease, color 0.3s ease; user-select:none; z-index:1000; }
    body.dark .music-toggle { background:var(--glass-dark); color:var(--text-dark); box-shadow:0 6px 18px rgba(0,0,0,0.6); }
    section.section { padding:4rem 1.25rem; max-width:900px; margin:0 auto; }
    @media (min-width:900px) { section.section { padding:6rem 2rem; } }
    .card { background:var(--card); border-radius:14px; padding:1.5rem 1.75rem; margin-bottom:1.5rem; box-shadow:0 8px 30px rgba(31,31,35,0.06); transition: box-shadow 0.3s ease; }
    .card:hover { box-shadow:0 12px 45px rgba(31,31,35,0.12); }
    details { background:transparent; border-radius:10px; padding:0.5rem 0; }
    details summary { list-style:none; cursor:pointer; display:flex; align-items:center; justify-content:space-between; padding:1rem 1rem; border-radius:10px; user-select:none; font-weight:700; font-size:1.15rem; transition: background 0.3s ease; }
    details[open] summary { background: linear-gradient(90deg, rgba(255,255,255,0.65), rgba(255,255,255,0.5)); font-weight:800; }
    body.dark details[open] summary { background: linear-gradient(90deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); }
    summary::-webkit-details-marker { display:none; }
    .summary-title { display:flex; gap:1rem; align-items:center; }
    .dot { width:46px; height:46px; border-radius:10px; background: linear-gradient(135deg,#fff,#ffeef7); display:flex; align-items:center; justify-content:center; font-weight:700; color:var(--accent); font-size:1.25rem; user-select:none; }
    .content-wrapper { overflow:hidden; height:0; opacity:0; transition: height 0.4s ease, opacity 0.4s ease; padding-left:3rem; margin-top:0.5rem; font-weight:400; line-height:1.5; color:var(--text); }
    body.dark .content-wrapper { color:var(--text-dark); }
    .parallax { height:70vh; border-radius:14px; overflow:hidden; display:flex; align-items:center; justify-content:center; margin:2rem auto; background-image:url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1400&q=80'); background-size:cover; background-position:center; background-attachment:fixed; box-shadow:0 12px 40px rgba(31,31,35,0.12); color:#fff; text-shadow:0 1px 8px rgba(0,0,0,0.8); }
    .parallax h2 { background:linear-gradient(90deg, rgba(0,0,0,0.45), rgba(0,0,0,0.2)); padding:1rem 2rem; border-radius:10px; font-weight:800; font-size:clamp(1.75rem,5vw,2.5rem); }
    .final { padding:3rem 1.25rem; text-align:center; font-weight:600; font-size:1.1rem; color:var(--accent); }
    .cta { display:inline-block; padding:0.75rem 1.75rem; border-radius:999px; border:2px solid rgba(197,139,90,0.15); background: linear-gradient(90deg, rgba(197,139,90,0.12), rgba(255,255,255,0)); font-weight:700; cursor:default; user-select:none; transition: box-shadow 0.3s ease; margin-top:1rem; }
    .cta:hover { box-shadow:0 0 15px var(--accent); }
    .gallery { display:grid; grid-template-columns: repeat(auto-fit,minmax(150px,1fr)); gap:1rem; margin-top:2rem; }
    .gallery img { width:100%; height:120px; object-fit:cover; border-radius:14px; cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .gallery img:hover { transform:scale(1.05); box-shadow:0 8px 20px rgba(0,0,0,0.2); }
    .lightbox { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.85); display:flex; justify-content:center; align-items:center; opacity:0; pointer-events:none; transition: opacity 0.3s ease; z-index:2000; }
    .lightbox.active { opacity:1; pointer-events:auto; }
    .lightbox img { max-width:90vw; max-height:80vh; border-radius:12px; box-shadow:0 0 40px rgba(255,255,255,0.7); }
    .lightbox .close-btn { position:fixed; top:1.5rem; right:1.5rem; font-size:2rem; color:white; cursor:pointer; font-weight:700; user-select:none; background:transparent; border:none; padding:0; line-height:1; }
    .lightbox .nav-btn { position:fixed; top:50%; transform:translateY(-50%); font-size:3rem; color:white; cursor:pointer; font-weight:700; user-select:none; background:transparent; border:none; padding:0 0.5rem; line-height:1; transition: color 0.2s ease; }
    .lightbox .nav-btn:hover { color:var(--accent); }
    .lightbox .nav-btn.prev { left:1rem; } .lightbox .nav-btn.next { right:1rem; }
    summary:focus-visible { outline:3px solid var(--accent); outline-offset:4px; }
    button:focus-visible { outline:3px solid var(--accent); outline-offset:4px; }
    body.cursor-heart {
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32"><text y="24" font-size="24">❤️</text></svg>') 16 16, auto;
    }
    body.cursor-heart button,
    body.cursor-heart a,
    body.cursor-heart summary,
    body.cursor-heart [role="button"],
    body.cursor-heart .play-hint,
    body.cursor-heart .enter-hint {
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32"><text y="24" font-size="24">❤️</text></svg>') 16 16, auto !important;
    }
    details {
  transition: box-shadow 0.4s ease, background-color 0.4s ease;
}

details[open] {
  background-color: rgba(255, 250, 230, 0.6); /* fondo con luz cálida */
  box-shadow: 0 6px 22px rgba(0,0,0,0.1);
}

body.dark details[open] {
  background-color: rgba(255, 255, 255, 0.08); /* luz sutil para modo oscuro */
  box-shadow: 0 8px 25px rgba(255,255,255,0.05);
}

.content-wrapper {
  height: 0;
  opacity: 0;
  overflow: hidden;
  transition: height 0.5s cubic-bezier(0.25, 1.75, 0.5, 1),
              opacity 0.3s ease;
}

.content-wrapper * {
  opacity: 0;
  transform: translateY(12px);
  transition: opacity 0.35s ease, transform 0.35s ease;
}
    video { width: 80%; max-width: 600px; border-radius: 10px; }
    button { padding: 10px 20px; font-size: 16px; margin-top: 15px; }
  </style>
</head>
<body class="intro-active">
  <div id="introOverlay" role="dialog" aria-label="Pantalla de bienvenida" tabindex="-1">
    <div class="intro-inner" aria-hidden="false">
      <h1 id="introTitle"></h1>
      <br><br>
      <div class="enter-hint hidden" id="enterBtn" role="button" aria-pressed="false" tabindex="0">Enter — pulsa aquí o en cualquier parte</div>
      <br><br><br>
      <div class="access-esc">También puedes pulsar <kbd>Enter</kbd></div>
    </div>
  </div>
  <audio id="musica" loop>
    <source src="musica.mp3" type="audio/mpeg" />
  </audio>
  <button aria-label="Cambiar modo claro/oscuro" class="dark-toggle" id="darkToggle">🌙</button>
  <button aria-label="Reproducir/pausar música" class="music-toggle" id="musicToggle">▶️</button>
  <main>
    <header class="hero" role="banner">
      <h1 data-aos="zoom-in">Para ti, mi niña ❤️</h1>
      <p data-aos="fade-up" data-aos-delay="150">
        Una pequeña sorpresa hecha con mucho cariño. Puedes pausar en cualquier momento la canción usando el botón ▶️ además de camiar a un modo nocturno con el botón 🌙.
      </p>
    </header>
    <section class="section" aria-labelledby="recuerdos">
      <h2 id="recuerdos" data-aos="fade-right">Recuerdos</h2>
      <div class="card" data-aos="fade-up" data-aos-delay="100">
        <details>
          <summary tabindex="0">
            <div class="summary-title">
              <div class="dot">1</div>
              <div>
                <strong>Nuestro primer día</strong>
                <div style="font-size: 0.9rem; opacity: 0.7">La fuente, la playa, tu compañía…</div>
              </div>
            </div>
            <div style="opacity:0.7">▼</div>
          </summary>
          <div class="content-wrapper" aria-hidden="true">
            <p>
              El primer día que quedamos fue algo imprevisto, casi como una travesura del destino.<br />
              Te propuse ir a la playa para hablar de cosas delicadas, de tus heridas y tus vivencias pasadas.<br /><br />
              Recuerdo verte allí, esperándome junto a aquella fuente con forma de grifo…<br />
              pensé que el agua que caía eran los nervios mismos, gritando por ti.<br /><br />
              Subiste al coche con una timidez tan pura que me contagiaste ese temblor en el pecho.<br /><br />
              El camino hacia Terreros fue como si nuestras presencias ya se conocieran de antes;<br />
              una conexión suave pero segura, que no necesitaba explicación.<br /><br />
              Al llegar a la playa sentí un déjà vu:<br />
              como si esa escena estaba escrita desde siempre.<br /><br />
              Nos acomodamos en las rocas, hablando de amores, desamores y verdades,<br />
              y en cada palabra parecía que despertabas recuerdos míos<br />
              que ni yo sabía que guardaba.<br /><br />
              Y cuando regresamos, cantando en el coche,<br />
              mi propia rareza reconoció la tuya…<br />
              y en ese reflejo encontré algo parecido a hogar.
            </p>
          </div>
        </details>
      </div>
      <div class="card" data-aos="fade-up" data-aos-delay="200">
        <details>
          <summary tabindex="0">
            <div class="summary-title">
              <div class="dot">2</div>
              <div>
                <strong>Un susurro para Helen</strong>
                <div style="font-size: 0.9rem; opacity: 0.7">
                  Un reflejo de tu luz entre sombras, un momento para recordarte cuánto te valoro.
                </div>
              </div>
            </div>
            <div style="opacity:0.7">▼</div>
          </summary>
          <div class="content-wrapper" aria-hidden="true">
            <p><strong>Helen — mi Helen,</strong></p>
            <p>
              Sé que has cargado con cosas que nadie debería sufrir: maltrato en casa, burlas y miradas que dejaron huella, épocas muy oscuras en las que la depresión te doblegó y hasta llegaste a tocar fondo. Saber todo eso me parte el corazón y me hace admirarte aún más por la fuerza y la sensibilidad que tienes.
            </p>
            <p>
              Eres una artista enorme. Cuando escribes, transformas el dolor y la belleza en palabras que me dejan sin aliento; plasmas lo que sientes con una honestidad y un talento que no había visto en ningún otro sitio, y eso me hizo enamorarme de ti.
            </p>
            <p>
              Cada vez que escucho tu voz, cada vez que leo lo que creas, siento que conozco un poco más de ese alma profunda que llevas dentro. Y me muero por protegerte, cuidarte y hacerte sentir que mereces todo lo bueno del mundo.
            </p>
            <p>Gracias por dejarme estar a tu lado y compartir esta aventura.</p>
            <p><em>Con todo mi amor, Jose.</em></p>
          </div>
        </details>
      </div>
    </section>
    <section class="parallax" aria-hidden="true">
      <h2>Para ti, Helen</h2>
        <video id="miVideo" src="video.mp4" preload="metadata" playsinline></video>
          <button id="btnMovil">▶ Reproducir / ⏸ Pausar</button>


    </section>
    <section class="section" aria-labelledby="galeria">
      <h2 id="galeria" data-aos="fade-left">Galería</h2>
      <div class="gallery" data-aos="fade-up" data-aos-delay="100">
        <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80" alt="Foto de una playa al atardecer" />
        <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=600&q=80" alt="Foto de flores de cerezo en primavera" />
        <img src="https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&fit=crop&w=600&q=80" alt="Foto de una montaña nevada" />
      </div>
    </section>
    <section class="final" aria-label="Final del regalo">
      <p>Gracias por ser tú, Helen. ❤️</p>
      <div class="cta">Con cariño, Jose</div>
    </section>
  </main>
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Galería ampliada" tabindex="-1">
    <button class="close-btn" id="lightboxClose" aria-label="Cerrar galería">&times;</button>
    <button class="nav-btn prev" id="lightboxPrev" aria-label="Imagen anterior">&#10094;</button>
    <img src="" alt="" id="lightboxImg" />
    <button class="nav-btn next" id="lightboxNext" aria-label="Imagen siguiente">&#10095;</button>
  </div>
  <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
  <script>
    AOS.init({ duration: 600, easing: 'ease-in-out', once: true });
    (function () {
      const introOverlay = document.getElementById('introOverlay');
      const enterBtn = document.getElementById('enterBtn');
      const introTitle = document.getElementById('introTitle');
      const music = document.getElementById('musica');
      const musicToggle = document.getElementById('musicToggle');
      let entered = false;
      let typing = true;
      let typingTimer = null;

      const introTexts = [
        "Con cariño de tu pollito, espero que te guste :)",
        ". .-. . ...   -- ..   -.. . ... . ---   -.-. .- -.. .-   .---- .----   .---- .----",
        "¿Que quién eres? Mi Helennn <3",
        "Son las 4:22 y solo pienso en vos",
        "Nescafe patrocina este detallito ⁽ᵐᵃⁿ̃ᵃⁿᵃ ᵗʳᵃᵇᵃʲᵒ ˣᵈ⁾",
        "Que suerte tuve de encontrarte habiendo tanto",
        "Mami a mi tu me gustas con cojone",
        "Te voy a cuidar así a mí me toque jalar gatillo",
        "Cada vez que yo no me encuentro en mí, voy a vos para revivir",
        "Como te digo que, mi alma se perfuma si te ve",
        "Solo imagina, tú y yo y nadie más",
        "Pondré estrellas al cielo pa que puedas mirarlas y te acuerdes de mí cuando haya un nuevo alba",
        "Qué importa lo que digan yo les dejo especular si tú eres espectacular",
        "No quiero perder la suerte de junto a mi lado tenerte",
        "Se me va la malicia cuando me acaricia",
        "Mientras uno está vivo, uno debe amar lo más que pueda",
        "I've been waiting my whole life to know I wanted you and I promise I won’t lie",
        "神に私たちを引き離さないでと祈ります。",
        "Everyone’s looking for someone to hold but I can’t let u go"
      ];

      const MESSAGE = introTexts[Math.floor(Math.random() * introTexts.length)];
      const TYPE_SPEED = 45;
      const AFTER_FINISH_DELAY = 350;
      const HIDE_ANIMATION_MS = 520;

      introTitle.textContent = '';
      enterBtn.classList.add('hidden');

      function showEnterHint() {
        enterBtn.classList.remove('hidden');
        enterBtn.style.opacity = '1';
        enterBtn.style.pointerEvents = 'auto';
        enterBtn.style.transform = 'translateY(0)';
      }

      function finishTypingInstantly() {
        if (!typing) return;
        clearTimeout(typingTimer);
        typing = false;
        introTitle.textContent = MESSAGE;
        setTimeout(showEnterHint, 80);
      }

      function typeStep(i = 0) {
        if (i <= MESSAGE.length - 1) {
          typing = true;
          introTitle.textContent = MESSAGE.slice(0, i + 1);
          if (!introTitle.querySelector('.caret')) {
            const caret = document.createElement('span');
            caret.className = 'caret';
            caret.textContent = '|';
            introTitle.appendChild(caret);
          }
          typingTimer = setTimeout(() => typeStep(i + 1), TYPE_SPEED + Math.random() * 40 - 20);
        } else {
          typing = false;
          const c = introTitle.querySelector('.caret');
          if (c) c.remove();
          setTimeout(showEnterHint, AFTER_FINISH_DELAY);
        }
      }

      function enterSite(e) {
        if (entered) return;
        entered = true;
        if (typing) {
          finishTypingInstantly();
          setTimeout(hideOverlayAndStart, 260);
        } else {
          hideOverlayAndStart();
        }
        if (e) e.preventDefault();
      }

      function hideOverlayAndStart() {
        introOverlay.classList.add('hide');
        if (music && music.paused) {
          music.play().catch(() => {});
          if (musicToggle) musicToggle.textContent = '⏸️';
        }
        const playHint = document.querySelector('.play-hint');
        if (playHint) {
          playHint.style.opacity = '0';
          playHint.style.transform = 'translateY(-10px)';
          setTimeout(() => { playHint.style.display = 'none'; }, 420);
        }
        setTimeout(() => {
          try { introOverlay.style.display = 'none'; } catch (e) {}
          document.body.classList.remove('intro-active');
          if (window.AOS) AOS.refresh();
          const main = document.querySelector('main');
          if (main) { main.setAttribute('tabindex', '-1'); main.focus(); }
        }, HIDE_ANIMATION_MS);
        document.body.classList.add('cursor-heart');
      }

      window.addEventListener('load', () => {
        setTimeout(() => typeStep(0), 240);
      });

      introOverlay.addEventListener('click', enterSite);
      enterBtn.addEventListener('click', enterSite);
      enterBtn.addEventListener('keydown', (ev) => {
        if (ev.key === 'Enter' || ev.key === ' ') {
          ev.preventDefault();
          enterSite(ev);
        }
      });

      document.addEventListener('keydown', (ev) => {
        if (entered) return;
        if (ev.key === 'Enter' || ev.key === ' ') {
          enterSite(ev);
        }
      });
    })();
  </script>
  <script>
    (function () {
      const darkToggle = document.getElementById('darkToggle');
      if (darkToggle) {
        darkToggle.textContent = document.body.classList.contains('dark') ? '☀️' : '🌙';
        darkToggle.addEventListener('click', (e) => {
          e.stopPropagation();
          const isDark = document.body.classList.toggle('dark');
          darkToggle.textContent = isDark ? '☀️' : '🌙';
        });
      }
      const music = document.getElementById('musica');
      const musicToggle = document.getElementById('musicToggle');
      if (music && musicToggle) {
        musicToggle.textContent = music.paused ? '▶️' : '⏸️';

        musicToggle.addEventListener('click', (ev) => {
          ev.stopPropagation();
          ev.preventDefault();
          if (music.paused) {
            music.play().catch((err) => {
              console.warn('play() blocked or failed:', err);
            });
          } else {
            music.pause();
          }
        });

        music.addEventListener('play', () => { musicToggle.textContent = '⏸️'; });
        music.addEventListener('pause', () => { musicToggle.textContent = '▶️'; });
        music.addEventListener('ended', () => { musicToggle.textContent = '▶️'; });
      }
      (function () {
        const galleryImages = Array.from(document.querySelectorAll('.gallery img'));
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxClose = document.getElementById('lightboxClose');
        const lightboxPrev = document.getElementById('lightboxPrev');
        const lightboxNext = document.getElementById('lightboxNext');
        let currentIndex = 0;

        if (!galleryImages.length || !lightbox || !lightboxImg) return;

        function showImage(index) {
          currentIndex = (index + galleryImages.length) % galleryImages.length;
          const src = galleryImages[currentIndex].src;
          const alt = galleryImages[currentIndex].alt || '';
          lightboxImg.src = src;
          lightboxImg.alt = alt;
          lightbox.classList.add('active');
          lightbox.setAttribute('aria-hidden', 'false');
          try { lightbox.focus(); } catch (e) {}
        }

        galleryImages.forEach((img, i) => {
          img.addEventListener('click', (ev) => {
            ev.stopPropagation();
            showImage(i);
          });
        });

        if (lightboxClose) lightboxClose.addEventListener('click', () => {
          lightbox.classList.remove('active');
          lightbox.setAttribute('aria-hidden', 'true');
        });

        if (lightboxPrev) lightboxPrev.addEventListener('click', (ev) => { ev.stopPropagation(); showImage(currentIndex - 1); });
        if (lightboxNext) lightboxNext.addEventListener('click', (ev) => { ev.stopPropagation(); showImage(currentIndex + 1); });

        lightbox.addEventListener('click', (e) => {
          if (e.target === lightbox) {
            lightbox.classList.remove('active');
            lightbox.setAttribute('aria-hidden', 'true');
          }
        });

        document.addEventListener('keydown', (e) => {
          if (!lightbox.classList.contains('active')) return;
          if (e.key === 'Escape') {
            lightbox.classList.remove('active');
            lightbox.setAttribute('aria-hidden', 'true');
          } else if (e.key === 'ArrowLeft') {
            showImage(currentIndex - 1);
          } else if (e.key === 'ArrowRight') {
            showImage(currentIndex + 1);
          }
        });
      })();
      (function () {
        const detailsList = Array.from(document.querySelectorAll('details'));
        detailsList.forEach(details => {
          const content = details.querySelector('.content-wrapper');
          if (!content) return;

          content.style.overflow = 'hidden';
          content.style.transition = 'height 0.35s ease, opacity 0.35s ease';
          if (details.open) {
            content.style.height = content.scrollHeight + 'px';
            content.style.opacity = '1';
            content.addEventListener('transitionend', function onEnd(e) {
              if (e.propertyName === 'height') {
                content.style.height = 'auto';
                content.removeEventListener('transitionend', onEnd);
              }
            });
          } else {
            content.style.height = '0';
            content.style.opacity = '0';
          }

          details.addEventListener('toggle', () => {
            if (details.open) {
              content.style.display = 'block';
              const h = content.scrollHeight;
              content.style.height = h + 'px';
              content.style.opacity = '1';
              const afterOpen = (e) => {
                if (e.propertyName === 'height') {
                  content.style.height = 'auto';
                  content.removeEventListener('transitionend', afterOpen);
                }
              };
              content.addEventListener('transitionend', afterOpen);
            } else {
              const currentHeight = content.scrollHeight;
              content.style.height = currentHeight + 'px';
              requestAnimationFrame(() => {
                content.style.height = '0';
                content.style.opacity = '0';
              });
            }
          });
        });
      })();
    })();
  </script>
  <script>
(() => {
  const details = document.querySelectorAll("details");

  function abrirConAnimacion(el) {
    const wrapper = el.querySelector(".content-wrapper");
    const children = [...wrapper.querySelectorAll("*")];

    // 🔹 Resetear height para forzar la transición cada vez
    wrapper.style.height = "0";
    wrapper.offsetHeight; // forzar reflow

    // 🔹 Animar a altura real
    wrapper.style.height = wrapper.scrollHeight + "px";
    wrapper.style.opacity = "1";

    children.forEach((child, i) => {
      child.style.transitionDelay = `${i * 90}ms`;
      child.style.opacity = "1";
      child.style.transform = "translateY(0)";
    });

    // 🔹 Dejar en auto después de la animación
    setTimeout(() => {
      wrapper.style.height = "auto";
    }, 500);
  }

  function cerrarConAnimacion(el) {
    const wrapper = el.querySelector(".content-wrapper");
    const children = [...wrapper.querySelectorAll("*")];
    const h = wrapper.scrollHeight;

    wrapper.style.height = h + "px";
    wrapper.offsetHeight; // forzar reflow
    wrapper.style.height = "0";
    wrapper.style.opacity = "0";

    const total = children.length;
    children.forEach((child, i) => {
      child.style.transitionDelay = `${(total - i - 1) * 60}ms`;
      child.style.opacity = "0";
      child.style.transform = "translateY(12px)";
    });

    // 🔹 Resetear height al final para que la próxima vez funcione
    setTimeout(() => {
      wrapper.style.height = "0";
    }, 500);
  }

  details.forEach((el) => {
    el.addEventListener("toggle", () => {
      if (el.open) {
        abrirConAnimacion(el);
      } else {
        cerrarConAnimacion(el);
      }
    });
  });
})();
</script>
 <script>
    const video = document.getElementById("miVideo");
    const btnMovil = document.getElementById("btnMovil");
    let teclaPresionada = false;
    let primeraVez = true;

    function isTypingTarget(el) {
      if (!el) return false;
      const tag = el.tagName;
      return tag === 'INPUT' || tag === 'TEXTAREA' || tag === 'SELECT' || el.isContentEditable;
    }

    video.addEventListener("ended", () => {
      primeraVez = true;
    });

    // Tecla H en escritorio
    document.addEventListener('keydown', (event) => {
      if (event.key.toLowerCase() !== 'h') return;
      if (event.repeat) return;
      if (isTypingTarget(document.activeElement)) return;

      event.preventDefault();
      teclaPresionada = true;

      if (primeraVez) {
        video.currentTime = 0;
        primeraVez = false;
      }
      video.play().catch(err => {
        video.muted = true;
        video.play();
      });
    });

    document.addEventListener('keyup', (event) => {
      if (event.key.toLowerCase() !== 'h') return;
      if (!teclaPresionada) return;
      teclaPresionada = false;
      video.pause();
    });

    // Botón para móviles
    btnMovil.addEventListener("touchstart", () => {
      if (primeraVez) {
        video.currentTime = 0;
        primeraVez = false;
      }
      video.play();
    });

    btnMovil.addEventListener("touchend", () => {
      video.pause();
    });
  </script>
</body>
</html>
